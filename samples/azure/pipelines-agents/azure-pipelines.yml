trigger:
  branches:
    include:
      - '*'
  paths:
    include:
      - samples/azure/pipeline-agents
pr: none

jobs:
  - job: ubuntu
    displayName: Ubuntu

    pool:
      vmImage: 'ubuntu-20.04'

    steps:
      - script: |
          uname -a
          lsb_release -a

          lscpu
          lsmem
          lsblk
          sudo lshw
        displayName: Core

      - script: |
          df -h

          sudo du -sh /* || true
          sudo du -sh /usr/* || true
          sudo du -sh /usr/local/* || true
          sudo du -sh /usr/share/* || true
        displayName: Disk

      - script: |
          apt list --installed
        displayName: Apps

  - job: windows
    displayName: Windows

    pool:
      vmImage: 'windows-2022'

    steps:
      - script: |
          cmd /c ver

          systeminfo
          powershell -c get-computerinfo
        displayName: Core

      - powershell: |
          Get-PSDrive
        displayName: Disk

      - script: |
          choco list -li
        displayName: Apps
